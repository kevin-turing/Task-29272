<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Israel-Palestine Conflict Viz</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        body { font-family: Arial; margin: 0; padding: 20px; }
        .chart { width: 100%; height: 400px; margin-bottom: 30px; }
        #map { height: 500px; }
    </style>
</head>
<body>
    <h1>Israel-Palestine Conflict Visualization</h1>
    
    <h2>Timeline of Key Events</h2>
    <div class="chart"><canvas id="timeline"></canvas></div>
    
    <h2>Changing Territories</h2>
    <div id="map" class="chart"></div>
    
    <h2>Palestinian Displacement</h2>
    <div class="chart"><canvas id="displacement"></canvas></div>
    
    <h2>Recent Conflict Casualties (Oct-Nov 2023)</h2>
    <div class="chart"><canvas id="casualties"></canvas></div>
    
    <h2>Human Rights Violations</h2>
    <div class="chart"><canvas id="violations"></canvas></div>

    <script>
    // Timeline
    new Chart(document.getElementById('timeline'), {
        type: 'scatter',
        data: {
            datasets: [{
                label: 'Key Events',
                data: [
                    {x: 1881, y: 0, event: "Jewish migration begins"},
                    {x: 1947, y: 0, event: "UN Partition Plan"},
                    {x: 1948, y: 0, event: "Israel established, First Arab-Israeli War"},
                    {x: 1967, y: 0, event: "Six-Day War"},
                    {x: 2006, y: 0, event: "Last Palestinian election"},
                    {x: 2023, y: 0, event: "Oct 7 attack, Israeli response"}
                ],
                pointRadius: 10,
                pointHoverRadius: 15
            }]
        },
        options: {
            scales: {
                y: {display: false},
                x: {
                    type: 'linear', 
                    position: 'bottom',
                    ticks: {
                        callback: function(value, index, values) {
                            return value;
                        }
                    }
                }
            },
            plugins: {
                tooltip: {
                    callbacks: {
                        label: (context) => context.raw.event
                    }
                }
            }
        }
    });

    // Map
    const map = L.map('map').setView([31.5, 35], 7);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
    
    const territories = {
        "1947": [
            {name: "Proposed Jewish State", color: "#ff9999"},
            {name: "Proposed Arab State", color: "#99ff99"},
            {name: "International Zone", color: "#9999ff"}
        ],
        "1949": [
            {name: "Israel", color: "#ff9999"},
            {name: "West Bank (Jordan)", color: "#99ff99"},
            {name: "Gaza Strip (Egypt)", color: "#9999ff"}
        ],
        "1967": [
            {name: "Israel", color: "#ff9999"},
            {name: "Occupied West Bank", color: "#ffcc99"},
            {name: "Occupied Gaza Strip", color: "#99ccff"}
        ]
    };

    Object.entries(territories).forEach(([year, areas], index) => {
        areas.forEach(area => {
            L.circle([31.5 + index*0.5, 35 + index*0.5], {
                color: area.color,
                fillColor: area.color,
                fillOpacity: 0.5,
                radius: 25000
            }).addTo(map).bindPopup(`${year}: ${area.name}`);
        });
    });

    // Displacement
    new Chart(document.getElementById('displacement'), {
        type: 'bar',
        data: {
            labels: ['1948', '1967'],
            datasets: [{
                label: 'Displaced Palestinians',
                data: [750000, 72000],
                backgroundColor: '#ff9999'
            }]
        }
    });

    // Casualties
    new Chart(document.getElementById('casualties'), {
        type: 'bar',
        data: {
            labels: ['Palestinian', 'Israeli'],
            datasets: [{
                label: 'Casualties',
                data: [9488, 1200],
                backgroundColor: ['#ff9999', '#99ff99']
            }]
        }
    });

    // Human Rights Violations
    new Chart(document.getElementById('violations'), {
        type: 'bar',
        data: {
            labels: ['Arbitrary Detention', 'Freedom of Expression', 'Forced Displacement'],
            datasets: [{
                label: 'Reported Violations',
                data: [200, 100, 72000],
                backgroundColor: '#ff9999'
            }]
        }
    });
    </script>
</body>
</html>